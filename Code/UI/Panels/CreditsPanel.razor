@namespace Beastborne.UI.Panels
@using Sandbox;
@using Sandbox.UI;
@using Beastborne.Core;
@using Beastborne.Systems;
@inherits Panel

<root class="@(IsVisible ? "visible" : "")">
	<div class="credits-overlay" onclick=@Hide></div>
	<div class="credits-panel">
		<div class="credits-header">
			<span class="credits-title">Credits</span>
			<button class="close-btn" onclick=@Hide><img class="close-icon" src="ui/icons/buttons/close.svg" /></button>
		</div>

		<div class="credits-content">
			<div class="credits-section">
				<div class="section-title">Development</div>
				<div class="credit-entry">
					<span class="credit-role">Game Design & Programming</span>
					<span class="credit-name">JdOs</span>
				</div>
				<div class="credit-entry">
					<span class="credit-role">Programming Assistant</span>
					<span class="credit-name">Claude (Anthropic)</span>
				</div>
			</div>

			<div class="credits-section">
				<div class="section-title">Art & Assets</div>
				<div class="credit-entry">
					<span class="credit-role">Monster Sprites</span>
					<span class="credit-name">AI Generated (PixelLab)</span>
				</div>
				<div class="credit-entry">
					<span class="credit-role">UI Design</span>
					<span class="credit-name">JdOs</span>
				</div>
			</div>

			<div class="credits-section">
				<div class="section-title">Special Thanks</div>
				<div class="credit-entry">
					<span class="credit-name">Squidler</span>
				</div>
				<div class="credit-entry">
					<span class="credit-name">exd</span>
				</div>
				<div class="credit-entry">
					<span class="credit-name">The s&box Community</span>
				</div>
				<div class="credit-entry">
					<span class="credit-name">All our Discord members</span>
				</div>
				<div class="credit-entry">
					<span class="credit-name">Everyone who played and gave feedback</span>
				</div>
			</div>

			<div class="credits-section">
				<div class="section-title">Built With</div>
				<div class="credit-entry">
					<span class="credit-name">s&box by Facepunch</span>
				</div>
			</div>
		</div>

		<div class="credits-footer">
			<span class="version-text">Beastborne v0.6.3</span>
		</div>
	</div>
</root>

@code {
	public static CreditsPanel Instance { get; private set; }
	public bool IsVisible { get; private set; }

	protected override void OnAfterTreeRender(bool firstTime)
	{
		if (firstTime)
		{
			Instance = this;
		}
	}

	public static void Show()
	{
		if (Instance != null)
		{
			Instance.IsVisible = true;
			Instance.StateHasChanged();
			SoundManager.PlayPopup();
		}
	}

	public static void Hide()
	{
		if (Instance != null)
		{
			Instance.IsVisible = false;
			Instance.StateHasChanged();
			SoundManager.PlayPopdown();
		}
	}

	protected override int BuildHash()
	{
		return HashCode.Combine(IsVisible);
	}
}
