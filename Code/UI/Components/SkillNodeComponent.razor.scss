SkillNodeComponent {
	// Don't position the wrapper - let the inner .skill-node handle absolute positioning
	// This fixes content disappearing on scroll
	display: contents;
}

.skill-node {
	position: absolute;
	width: 64px;
	height: 64px;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
	transition: all 0.2s ease;
	transform: translate(-50%, -50%);
	pointer-events: all;

	// Make inner elements not block hover
	.node-border, .node-inner, .node-icon, .node-checkmark {
		pointer-events: none;
	}

	&:hover {
		transform: translate(-50%, -50%) scale(1.15);
		z-index: 100;

		.node-border {
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
		}
	}

	// State classes
	&.locked {
		opacity: 0.6;

		.node-icon {
			color: rgba(255, 255, 255, 0.3);
			filter: grayscale(1);
		}

		.node-border {
			border-color: rgba(255, 255, 255, 0.1);
			background-color: rgba(20, 20, 35, 0.9);
		}

		.node-inner {
			background-color: rgba(0, 0, 0, 0.3);
		}
	}

	&.available {
		animation: pulse 2s ease-in-out infinite;

		.node-border {
			border-color: rgba(139, 92, 246, 0.6);
			background-color: rgba(20, 20, 35, 1);
			box-shadow: 0 0 16px rgba(139, 92, 246, 0.4);
		}

		.node-inner {
			background-color: rgba(139, 92, 246, 0.15);
		}

		.node-icon {
			color: #a78bfa;
			filter: saturate(1);
		}
	}

	&.unlocked {
		.node-border {
			border-color: rgba(74, 222, 128, 0.6);
			background-color: rgba(20, 35, 25, 1);
			box-shadow: 0 0 12px rgba(74, 222, 128, 0.3);
		}

		.node-inner {
			background-color: rgba(74, 222, 128, 0.15);
		}

		.node-icon {
			color: #4ade80;
			filter: saturate(1);
		}

		.node-checkmark {
			opacity: 1;
		}
	}

	// Just unlocked state - plays unlock animation
	&.just-unlocked {
		animation: nodeUnlock 0.4s ease-out;

		.node-border {
			animation: unlockGlow 0.5s ease-out;
		}

		.node-checkmark {
			animation: checkmarkPop 0.3s ease-out 0.15s;
		}
	}

	// Category colors - only for unlocked nodes
	&.breeding.unlocked {
		.node-border {
			border-color: rgba(236, 72, 153, 0.6);
			background-color: rgba(35, 20, 30, 1);
			box-shadow: 0 0 12px rgba(236, 72, 153, 0.3);
		}
		.node-inner { background-color: rgba(236, 72, 153, 0.15); }
		.node-icon { color: #f472b6; }
	}

	&.combat.unlocked {
		.node-border {
			border-color: rgba(239, 68, 68, 0.6);
			background-color: rgba(35, 20, 20, 1);
			box-shadow: 0 0 12px rgba(239, 68, 68, 0.3);
		}
		.node-inner { background-color: rgba(239, 68, 68, 0.15); }
		.node-icon { color: #f87171; }
	}

	&.affinity.unlocked {
		.node-border {
			border-color: rgba(251, 191, 36, 0.6);
			background-color: rgba(35, 30, 20, 1);
			box-shadow: 0 0 12px rgba(251, 191, 36, 0.3);
		}
		.node-inner { background-color: rgba(251, 191, 36, 0.15); }
		.node-icon { color: #fcd34d; }
	}

	&.contract.unlocked {
		.node-border {
			border-color: rgba(59, 130, 246, 0.6);
			background-color: rgba(20, 25, 35, 1);
			box-shadow: 0 0 12px rgba(59, 130, 246, 0.3);
		}
		.node-inner { background-color: rgba(59, 130, 246, 0.15); }
		.node-icon { color: #60a5fa; }
	}

	&.exploration.unlocked {
		.node-border {
			border-color: rgba(34, 197, 94, 0.6);
			background-color: rgba(20, 35, 25, 1);
			box-shadow: 0 0 12px rgba(34, 197, 94, 0.3);
		}
		.node-inner { background-color: rgba(34, 197, 94, 0.15); }
		.node-icon { color: #4ade80; }
	}
}

@keyframes pulse {
	0%, 100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
	50% {
		opacity: 0.95;
		transform: translate(-50%, -50%) scale(1.08);
	}
}

// Skill node unlock animation - plays when a skill is unlocked
@keyframes nodeUnlock {
	0% {
		transform: translate(-50%, -50%) scale(1);
	}
	30% {
		transform: translate(-50%, -50%) scale(1.2);
	}
	100% {
		transform: translate(-50%, -50%) scale(1);
	}
}

// Glow burst when unlocking
@keyframes unlockGlow {
	0% {
		box-shadow: 0 0 12px rgba(74, 222, 128, 0.3);
	}
	40% {
		box-shadow: 0 0 30px rgba(74, 222, 128, 0.8), 0 0 50px rgba(74, 222, 128, 0.4);
	}
	100% {
		box-shadow: 0 0 12px rgba(74, 222, 128, 0.3);
	}
}

// Checkmark pop-in animation
@keyframes checkmarkPop {
	0% {
		opacity: 0;
		transform: scale(0.3);
	}
	60% {
		opacity: 1;
		transform: scale(1.2);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

.node-border {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	border: 2px solid rgba(255, 255, 255, 0.15);
	border-radius: 12px;
	background-color: rgba(20, 20, 35, 1);
	transition: all 0.2s ease;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.node-inner {
	position: absolute;
	top: 4px;
	left: 4px;
	right: 4px;
	bottom: 4px;
	border-radius: 8px;
	background-color: rgba(0, 0, 0, 0.2);
	transition: all 0.2s ease;
}

.node-icon {
	position: relative;
	z-index: 2;
	font-size: 24px;
	color: rgba(255, 255, 255, 0.85);
	transition: all 0.2s ease;
}

.node-checkmark {
	position: absolute;
	bottom: -4px;
	right: -4px;
	width: 18px;
	height: 18px;
	background: linear-gradient(135deg, #4ade80, #22c55e);
	border-radius: 50%;
	display: flex;
	justify-content: center;
	align-items: center;
	font-size: 10px;
	color: white;
	opacity: 0;
	transition: opacity 0.2s ease;
	border: 2px solid rgba(20, 20, 35, 1);
	z-index: 5;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}
